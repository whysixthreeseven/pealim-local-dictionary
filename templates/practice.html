{% extends "components/layout.html" %}
{% block stylesheet %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navigation.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dictionary.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/practice.css') }}">
{% endblock stylesheet %}

{% block navigation %}
    {% include "components/navigation.html" %}
{% endblock navigation %}

{% block content %}
<div class="dictionary-container">

    <!-- Header -->
    <div class="dictionary-header">
        <h1 class="dictionary-title">Practice Words</h1>
        <p class="dictionary-subtitle">Showing {{ inputs|length }} of {{ pagination.total_words }} words</p>
    </div>

    <!-- Add Word Form (Above Table) -->
    <form action="{{ url_for('practice.add_word') }}" method="POST" class="add-word-form">
        <input type="text" name="WORD_HE" placeholder="–°–ª–æ–≤–æ (–∏–≤—Ä–∏—Ç)" class="input-field">
        <input type="text" name="STEM_HE" placeholder="–ö–æ—Ä–µ–Ω—å" class="input-field">
        <input type="text" name="POS_RU" placeholder="–ß–∞—Å—Ç—å —Ä–µ—á–∏" class="input-field">
        <input type="text" name="INF_RU" placeholder="–ò–Ω—Ñ–∏–Ω–∏—Ç–∏–≤" class="input-field">
        <input type="text" name="TRANSCRIPTION_RU" placeholder="–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è" class="input-field">
        <input type="text" name="TRANSLATION_RU" placeholder="–ü–µ—Ä–µ–≤–æ–¥" class="input-field">
        <button type="submit" class="add-btn">+ Add</button>
    </form>


    <!-- Words Table -->
    <div class="table-container">
        <table class="words-table">
            <thead>
                <tr>
                    <th class="column-id">#</th>
                    <th>Hebrew</th>
                    <th>Stem</th>
                    <th>Type</th>
                    <th>Inflection</th>
                    <th>Transcription</th>
                    <th>Translation</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for inp in inputs %}
                <tr class="word-row">
                    <td class="cell-id">{{ inp.ID }}</td>
                    <td class="cell-word-he">{{ inp.WORD_HE or '‚Äî' }}</td>
                    <td class="cell-stem-he">{{ inp.STEM_HE or '‚Äî' }}</td>
                    <td class="cell-pos">{{ inp.POS_RU or '‚Äî' }}</td>
                    <td class="cell-inf">{{ inp.INF_RU or '‚Äî' }}</td>
                    <td class="cell-transcription">{{ inp.TRANSCRIPTION_RU or '‚Äî' }}</td>
                    <td class="cell-translation">{{ inp.TRANSLATION_RU or '‚Äî' }}</td>
                    <td class="cell-actions">
                        <form action="{{ url_for('practice.delete_word', id=inp.ID) }}" method="POST" class="delete-form">
                            <button type="submit" class="delete-btn" title="Delete Word">üóëÔ∏è</button>
                        </form>
                    </td>

                </tr>
                {% else %}
                <tr>
                    <td colspan="8" class="no-words">No words added yet</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div class="pagination-container">
        <div class="pagination-info">
            Page {{ pagination.current_page }} of {{ pagination.total_pages }}
        </div>

        <div class="pagination-controls">
            {% if pagination.has_prev %}
                <a href="{{ url_for('practice.practice', page=1) }}" class="pagination-btn">¬´ First</a>
                <a href="{{ url_for('practice.practice', page=pagination.prev_page) }}" class="pagination-btn">‚Äπ Prev</a>
            {% else %}
                <span class="pagination-btn disabled">¬´ First</span>
                <span class="pagination-btn disabled">‚Äπ Prev</span>
            {% endif %}

            {% set start_page = [1, pagination.current_page - 2]|max %}
            {% set end_page = [pagination.total_pages, pagination.current_page + 2]|min %}
            {% for p in range(start_page, end_page + 1) %}
                {% if p == pagination.current_page %}
                    <span class="pagination-btn pagination-current">{{ p }}</span>
                {% else %}
                    <a href="{{ url_for('practice.practice', page=p) }}" class="pagination-btn">{{ p }}</a>
                {% endif %}
            {% endfor %}

            {% if pagination.has_next %}
                <a href="{{ url_for('practice.practice', page=pagination.next_page) }}" class="pagination-btn">Next ‚Ä∫</a>
                <a href="{{ url_for('practice.practice', page=pagination.total_pages) }}" class="pagination-btn">Last ¬ª</a>
            {% else %}
                <span class="pagination-btn disabled">Next ‚Ä∫</span>
                <span class="pagination-btn disabled">Last ¬ª</span>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}
